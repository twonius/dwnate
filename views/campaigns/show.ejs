<% include ../partials/header %>
<section style="padding-bottom: 0">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h2><%=campaign.state%> deserves a better <%=campaign.party%> than <%=campaign.name%></h2>
        <p><%= campaign.description %></p>
      </div>
    </div>
  </div>
</section>
<section style="padding-top: 0">
  <div class="container">
    <div class="row">
      <div class="col-md-6 profile">
        <img class="img-responsive" src="<%= campaign.image %>">
      </div>
      <div class="col-md-6">
        <h3 class="text-secondary">Totals</h3>
        <!-- <h4>Support</h4>
        <div class="row">
          <h4 class="pull-left">$<%= campaign.general %> General Election</h4>
          <div class="text-right">
            <a class="btn btn-success" href="/campaigns/<%= campaign._id %>/comments/new">General</a>
          </div>
        </div>
        <div class="row">
          <h4 class="pull-left">$<%= campaign.primary %> Party Primary</h4>
          <div class="text-right">
            <a class="btn btn-success" href="/campaigns/<%= campaign._id %>/comments/new">Primary</a>
          </div>
        </div>
        <br/> -->
        <!-- <h4>DWNATE</h4> -->
        <!-- <div class="row">
          <h4 class="pull-left">-$<%= campaign.general %> General Election</h4>
          <div class="text-right">
            <a class="btn btn-danger" href="/campaigns/<%= campaign._id %>/comments/new">General</a>
          </div>
        </div> -->
        <!-- <h3 class="badge badge-info">$<%=campaign.primary %> </h3> -->
        <h2><span class="badge badge-secondary">$<%=campaign.primary %></span></h2>
        <h3 class="text-secondary">Info</h3>
        <br>
        <ul class="list-group list-group-flush">
          <li class="list-group-item"><span class="text-secondary">State</span> <%= campaign.state %></li>
          <li class="list-group-item"><span class="text-secondary">Party</span> <%= campaign.party %> </li>
          <li class="list-group-item"><span class="text-secondary">Chamber</span> <%= campaign.chamber %> </li>
        </ul>
        <br>
        <div id="main" class="loading">
            <div id="checkout">
            <div id="payment-request">
              <div id="payment-request-button"></div>
            </div>
            <div id="stripe-widget">
            <form action="your-server-side-code" method="POST">
              <script
              src="https://checkout.stripe.com/checkout.js" class="stripe-button"
              data-key="pk_test_6pRNASCoBOKtIshFeQd4XMUh"
              data-amount="999"
              data-name="Stripe.com"
              data-description="Example charge"
              data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
              data-locale="auto"
              data-zip-code="true">
              </script>
            </form>
          </div> 
            <div id="card-errors" class="element-errors"></div>
            <div id="iban-errors" class="element-errors"></div>
          </div>
          <!-- <div id="confirmation">
            <div class="status processing">
              <h1>Completing your order…</h1>
              <p>We’re just waiting for the confirmation from your bank… This might take a moment but feel free to close this page.</p>
              <p>We’ll send your receipt via email shortly.</p>
            </div>
            <div class="status success">
              <h1>Thanks for your order!</h1>
              <p>Woot! You successfully made a payment with Stripe.</p>
              <p class="note">We just sent your receipt to your email address, and your items will be on their way shortly.</p>
            </div>
            <div class="status receiver">
              <h1>Thanks! One last step!</h1>
              <p>Please make a payment using the details below to complete your order.</p>
              <div class="info"></div>
            </div>
            <div class="status error">
              <h1>Oops, payment failed.</h1>
              <p>It looks like your order could not be paid at this time. Please try again or select a different payment option.</p>
              <p class="error-message"></p>
            </div>
          </div> -->
        </div>
      </div>
    </div>
  </div>
</section>
<section style="padding-top: 0">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h4>Dwnations</h4>
        <div class="well">
          <hr>
          <% campaign.comments.forEach(function(comment){ %>
          <div class="row">
            <div class="col-md-12">
              <strong><%= comment.author.username %></strong>
              <span class="pull-right"><%= moment(comment.createdAt).fromNow() %></span>
              <div>
                <%= comment.text %> : -$<%= comment.amount %>
                <hr>
              </div>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div id="map" style="height: 300px"></div>
      </div>
    </div>
  </div>
</section>

<script src="https://js.stripe.com/v3/"></script>
<script src="/scripts/payments.js"></script>
<% include ../partials/footer %>
